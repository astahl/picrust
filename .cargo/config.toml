[alias]
rel="build --release"
run64="run --release --target=aarch64-unknown-none --no-default-features --features=raspi3b"
imgpi3_64="objcopy --release --target=aarch64-unknown-none --no-default-features --features=raspi3b -- -O binary kernel_bcm2837.img"
imgpi4_64="objcopy --release --target=aarch64-unknown-none --no-default-features --features=raspi4 -- -O binary kernel_bcm2711.img"
inspect64="objdump --release --target=aarch64-unknown-none -- -h -f -s -S -C -d"

[build]
target=["aarch64-unknown-none"]

[target.aarch64-unknown-none]
runner="qemu-system-aarch64 -m 1G -M raspi3b -serial stdio -d int -kernel "
rustflags=[
    "-C", "force-unwind-tables=no",
    "-C", "link-arg=-Tlink64.x",
# uncomment to strip symbols
#    "-C", "link-arg=-s",
    "-C", "target-feature=neon"
]